<!DOCTYPE html><html><head><title>Tetris</title><style>*{font-family:'Courier New',Courier,monospace;user-select:none;}canvas{padding-left:30%;}h1{padding-left:30%;}#button{width:fit-content;padding:5px;margin-left:30%;transition-duration:.3s;}#button:hover{background-color:white;border:5px outset black;}</style></head><body><canvas width="300" height="600" id="canvas"></canvas><h1 id="score"></h2><h2 id="button" onclick="g.in();">Restart</h2><script>var g={cs:["Blue","Red","Green","Purple","Gold","Cyan"],w:10,h:20,ctx:document.getElementById("canvas").getContext("2d"),ss: document.getElementById("score"),s:0,sc:0,c:function(){g.by=0;g.bx=Math.floor(g.w/2)-1;g.bc=g.cs[Math.floor(Math.random()*g.cs.length)+0];g.b=g.gn();ps=[];g.b.forEach(p=>{ps.push([p[0]+g.bx,p[1]+g.by]);});var co=false;for(var y=0;y<g.m.length;y++){for(var x=0;x<g.m[0].length;x++){ps.forEach(p=>{if(p[0]==x&&p[1]==y&&g.m[y][x]!=null){co=true;}});}}if(co){g.l=true;}},cm:function(){this.m=[];var r=null;for(var y=0;y<this.h;y++){r=[];for(var x=0;x<this.w;x++){r.push(null);}this.m.push(r);}},gn:function(){var scd=Math.floor(Math.random()*6)+0;if(scd==0){var sh=[[0,0],[0,1],[1,0],[1,1]];}else if(scd==1){var sh=[[0,0],[0,-1],[0,-2],[0,1]];}else if(scd==2){var sh=[[0,0],[-1,0],[1,0],[1,-1]];}else if(scd==3){var sh=[[0,0],[-1,0],[1,0],[1,1]];}else if(scd==4){var sh=[[0,0],[-1,0],[1,0],[0,1]];}else{var sh=[[0,0],[-1,0],[1,-1],[0,-1]];}return sh;},d:function(){var cl=null;var ct=0;for(var y=0;y<this.h;y++){for(var x=0;x<this.w;x++){ct++;cl=this.m[y][x];if(cl==null){this.ctx.fillStyle=ct%2==0?"DarkBlue":"Navy";}else{this.ctx.fillStyle=cl;}this.ctx.fillRect(x*30,y*30,30,30);}ct++;}this.ctx.fillStyle=this.bc;var x=0;var y=0;this.b.forEach(i=>{x=i[0];y=i[1];x+=this.bx;y+=this.by;this.ctx.fillRect(x*30,y*30,30,30);});this.ss.innerHTML="Score: "+this.sc;},re:function(kp){var k=kp.key.toLowerCase();if(k=="a"){g.sds(-1);}else if(k=="d"){g.sds(1);}else if(k=="w"){g.fd();}else if(k=="s"){g.rb();}},sds:function(ic){g.bx+=ic;var ps=[];g.b.forEach(p=>{ps.push([p[0]+g.bx,p[1]+g.by]);});var co=false;for(var y=0;y<g.m.length;y++){for(var x=0;x<g.m[0].length;x++){ps.forEach(p=>{if(p[0]==x&&p[1]==y&&g.m[y][x]!=null){co=true;}});}}ps.forEach(p=>{if(p[0]<0||p[0]>=g.w){co=true;}});if(co){g.bx-=ic;}},rb:function(){var ns=[];g.b.forEach(i=>{ns.push([i[0],i[1]]);});for(var i=0;i<4;i++){var x=ns[i][0];var y=ns[i][1];ns[i][0]=-y;ns[i][1]=x;}var co=false;for(var y=0;y<g.m.length;y++){for(var x=0;x<g.m[0].length;x++){ns.forEach(p=>{if(p[0]+g.bx==x&&p[1]+g.by==y&&g.m[y][x]!=null){co=true;}});}}ns.forEach(p=>{if(p[0]+g.bx<0||p[0]+g.bx>=g.w||p[1]+g.by>=g.h){co=true;}});if(!co){g.b=ns;}},fd:function(){var co=g.db(true);if(!co){g.fd();}},db:function(fdi=false){var hs=false;g.by++;var py=0;var y=0;g.b.forEach(i=>{y=i[1]+g.by;if(y>py){py=y;}});var co=false;if(py>=g.h){co=true;}else{var ps=[];g.b.forEach(i=>{ps.push([i[0]+g.bx,i[1]+g.by]);});for(var y=0;y<g.m.length;y++){for(var x=0;x<g.m[0].length;x++){ps.forEach(p=>{if(p[0]==x&&p[1]==y&&g.m[y][x]!=null){co=true;}});}}}if(co){var hs=true;g.by--;g.b.forEach(i=>{g.m[i[1]+g.by][i[0]+g.bx]=g.bc;});g.c();}if(!fdi){g.s-=1;window.setTimeout(g.db,g.s);}return hs;},cr:function(){for(var i=0;i<g.m.length;i++){var r=g.m[i];var cp=true;r.forEach(cl=>{if(cl==null){cp=false;}});if(cp){g.m[i]=[null,null,null,null,null,null,null,null,null,null];var is=[];for(var index=0;index<i;index++){is.unshift(index);}is.forEach(index=>{var cs=[];g.m[index].forEach(cl=>{cs.push(cl);});g.m[index+1]=[];for(var x=0;x<g.w;x++){g.m[index+1].push(cs[x]);}});g.m[0]=[null,null,null,null,null,null,null,null,null,null];g.sc+=20*g.w;}}},in:function(){g.sc=0;g.s=1000;g.l=false;g.cm();g.c();g.t();window.setTimeout(g.db,g.s);},t:function(){g.d();g.cr();if(!g.l){window.setTimeout(g.t,0.1);}}};window.addEventListener("keypress",g.re,false);g.in();</script></body></html>